<script>
  (function() {
    try {
      // 모든 경로를 index.html로 리디렉션
      const currentPath = window.location.pathname;
      const queryParams = window.location.search;

      if (currentPath.includes("/kakao-login-success") && queryParams.includes("code")) {
        // 카카오 인증 성공 시 정상적으로 index.html 로드
        window.location.href = "/WSD-Assignment-02" + currentPath + queryParams;
      } else if (currentPath.includes("/kakao-login-success") && !queryParams.includes("code")) {
        // 인증 코드가 없는 경우 로그인 페이지로 리다이렉트
        console.error("Authorization code not found. Redirecting to login.");
        const KAKAO_AUTH_URL = `https://kauth.kakao.com/oauth/authorize?client_id=${process.env.REACT_APP_KAKAO_REST_API_KEY}&redirect_uri=${process.env.REACT_APP_KAKAO_REDIRECT_URI}&response_type=code`;
        window.location.href = KAKAO_AUTH_URL;
      } else {
        // 기본 리디렉션 처리
        window.location.href = "/WSD-Assignment-02" + currentPath + queryParams;
      }
    } catch (err) {
      console.error("Error during redirection:", err);
      // 오류 발생 시 카카오 로그인 페이지로 리다이렉트
      const KAKAO_AUTH_URL = `https://kauth.kakao.com/oauth/authorize?client_id=${process.env.REACT_APP_KAKAO_REST_API_KEY}&redirect_uri=${process.env.REACT_APP_KAKAO_REDIRECT_URI}&response_type=code`;
      window.location.href = KAKAO_AUTH_URL;
    }
  })();
</script>
